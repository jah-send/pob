<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>POB-Robotics-Suite 007 Library: timer.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>timer.h File Reference</h1>  </div>
</div>
<div class="contents">

<p>Timer functions.  
<a href="#_details">More...</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a5269998c8dd050fbd8ff1c958f9a59cd">WaitUs</a> (UInt32 delayInUs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait a delay in microseconds.  <a href="#a5269998c8dd050fbd8ff1c958f9a59cd"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a66d803bbb86607dd36a6838bc89e77db">WaitMs</a> (UInt32 delayInMs)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Wait a delay in milliseconds.  <a href="#a66d803bbb86607dd36a6838bc89e77db"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Clock functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp6367de0ad5d82b98fdc69bcfb0e87ccf"></a>Get clock tick (in 1ms unit). </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a4e733091a9ac0071a955bce5e0d14e0f">StartClock</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start the clock !  <a href="#a4e733091a9ac0071a955bce5e0d14e0f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">UInt32&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#aab062d45dbbb4b0fb103964ab5203605">GetClock</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get current clock.  <a href="#aab062d45dbbb4b0fb103964ab5203605"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#acbffbad8314b59848b0e994b4a4cd175">StopClock</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the clock.  <a href="#acbffbad8314b59848b0e994b4a4cd175"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Timer3 functions</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpbf5da975d7af9c683c7de45d2a18ff3a"></a>Use the timer3 interrupt. </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a22b44e6d182798c630db2df4c1121b7f">InitTimer3</a> (UInt32 delay)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Init a timer on Timer3 hardware.  <a href="#a22b44e6d182798c630db2df4c1121b7f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#ae328dd20f9241cbb90303ebbc8c701e0">StopTimer3</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop the timer3 interrupt.  <a href="#ae328dd20f9241cbb90303ebbc8c701e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">UInt8&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a0c48e79942c7991c52dc8ee3de0c8243">IsTimer3Overflow</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Is Timer3 triggered an interrupt?  <a href="#a0c48e79942c7991c52dc8ee3de0c8243"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#a822862a191b02c8975cd06041241df34">Timer3AttachFunction</a> (void(*Process)(void))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Attach a function to the Timer3.  <a href="#a822862a191b02c8975cd06041241df34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="timer_8h.html#aa459f9586e58789d008b72071dcca310">Timer3DetachFunction</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the function attached to the Timer3.  <a href="#aa459f9586e58789d008b72071dcca310"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>Timer functions. </p>
<p><a class="anchor" id="timer"></a></p>
<p>Manage clock and timer interrupt.</p>
<dl class="user"><dt><b>Timer3 example</b></dt><dd></dd></dl>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="pob_robotic_suite_8h.html" title="General POB-Robotics-Suite include.">pobRoboticSuite.h</a>&gt;</span>

 <a class="code" href="pob_robotic_suite_8h.html#a0d35adb56185f81b48a3091f60862419">UInt8</a> flag=0;

 <span class="comment">// This function is called every 500ms by the Timer3 interrupt:</span>
 <span class="keywordtype">void</span> Process(<span class="keywordtype">void</span>)
 {
        <span class="comment">// Blink led:</span>
        <span class="keywordflow">if</span>(flag==0)
        {
                <a class="code" href="io_8h.html#add2c9aba750cb4a20fd6162c35a02356" title="Power on the robot led.">SetLed</a>();
                flag=1;
        }
        <span class="keywordflow">else</span>
        {
                <a class="code" href="io_8h.html#ac3a79636520bf7882914092ce0a6536c" title="Power off the robot led.">ClearLed</a>();
                flag=0;
        }
 }

 <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
 {

        <span class="comment">// Init cpu:</span>
        <a class="code" href="pob_robotic_suite_8h.html#a9c7b6f7049447d5d9103ab928bdb4dd2" title="Initialize the microcontroller of the POB-Robotics-Suite.">InitCpu</a>();

        <span class="comment">// Init timer3 with 500ms delay and attach a function:</span>
        <a class="code" href="timer_8h.html#a22b44e6d182798c630db2df4c1121b7f" title="Init a timer on Timer3 hardware.">InitTimer3</a>(500000);
        <a class="code" href="timer_8h.html#a822862a191b02c8975cd06041241df34" title="Attach a function to the Timer3.">Timer3AttachFunction</a>(&amp;Process);

        <span class="keywordflow">while</span>(1)
        {
        }
 }
</pre></div><dl class="user"><dt><b>Timer3 second example</b></dt><dd></dd></dl>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &lt;<a class="code" href="pob_robotic_suite_8h.html" title="General POB-Robotics-Suite include.">pobRoboticSuite.h</a>&gt;</span>

 <a class="code" href="pob_robotic_suite_8h.html#a0d35adb56185f81b48a3091f60862419">UInt8</a> flag=0;

 <span class="comment">// This function is called every 500ms by the main function:</span>
 <span class="keywordtype">void</span> Process(<span class="keywordtype">void</span>)
 {
        <span class="comment">// Blink led:</span>
        <span class="keywordflow">if</span>(flag==0)
        {
                <a class="code" href="io_8h.html#add2c9aba750cb4a20fd6162c35a02356" title="Power on the robot led.">SetLed</a>();
                flag=1;
        }
        <span class="keywordflow">else</span>
        {
                <a class="code" href="io_8h.html#ac3a79636520bf7882914092ce0a6536c" title="Power off the robot led.">ClearLed</a>();
                flag=0;
        }
 }

 <span class="keywordtype">int</span> main(<span class="keywordtype">void</span>)
 {

        <span class="comment">// Init cpu:</span>
        <a class="code" href="pob_robotic_suite_8h.html#a9c7b6f7049447d5d9103ab928bdb4dd2" title="Initialize the microcontroller of the POB-Robotics-Suite.">InitCpu</a>();

        <span class="comment">// Init timer3 with 500ms delay:</span>
        <a class="code" href="timer_8h.html#a22b44e6d182798c630db2df4c1121b7f" title="Init a timer on Timer3 hardware.">InitTimer3</a>(500000);

        <span class="comment">// Main loop:</span>
        <span class="keywordflow">while</span>(1)
        {
                <span class="keywordflow">if</span>(<a class="code" href="timer_8h.html#a0c48e79942c7991c52dc8ee3de0c8243" title="Is Timer3 triggered an interrupt?">IsTimer3Overflow</a>()==1)
                {
                        <span class="comment">// If Timer3 triggers an interrupt, then call the function Process:</span>
                        Process();
                }
        }
 }
</pre></div> <hr/><h2>Function Documentation</h2>
<a class="anchor" id="aab062d45dbbb4b0fb103964ab5203605"></a><!-- doxytag: member="timer.h::GetClock" ref="aab062d45dbbb4b0fb103964ab5203605" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UInt32 GetClock </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get current clock. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>Current clock in 1 ms unit. </dd></dl>

</div>
</div>
<a class="anchor" id="a22b44e6d182798c630db2df4c1121b7f"></a><!-- doxytag: member="timer.h::InitTimer3" ref="a22b44e6d182798c630db2df4c1121b7f" args="(UInt32 delay)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void InitTimer3 </td>
          <td>(</td>
          <td class="paramtype">UInt32&nbsp;</td>
          <td class="paramname"> <em>delay</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Init a timer on Timer3 hardware. </p>
<p>An timer interrupt will be triggered at the end of delay.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>delay</em>&nbsp;</td><td>Delay in microseconds. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0c48e79942c7991c52dc8ee3de0c8243"></a><!-- doxytag: member="timer.h::IsTimer3Overflow" ref="a0c48e79942c7991c52dc8ee3de0c8243" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">UInt8 IsTimer3Overflow </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Is Timer3 triggered an interrupt? </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>1 if the timer3 overflow, else 0. </dd></dl>

</div>
</div>
<a class="anchor" id="a4e733091a9ac0071a955bce5e0d14e0f"></a><!-- doxytag: member="timer.h::StartClock" ref="a4e733091a9ac0071a955bce5e0d14e0f" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StartClock </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start the clock ! </p>
<p>The function reset the current clock and init a clock on timer0 hardware. Clock unit: 1 ms. </p>

</div>
</div>
<a class="anchor" id="acbffbad8314b59848b0e994b4a4cd175"></a><!-- doxytag: member="timer.h::StopClock" ref="acbffbad8314b59848b0e994b4a4cd175" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StopClock </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the clock. </p>

</div>
</div>
<a class="anchor" id="ae328dd20f9241cbb90303ebbc8c701e0"></a><!-- doxytag: member="timer.h::StopTimer3" ref="ae328dd20f9241cbb90303ebbc8c701e0" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void StopTimer3 </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop the timer3 interrupt. </p>

</div>
</div>
<a class="anchor" id="a822862a191b02c8975cd06041241df34"></a><!-- doxytag: member="timer.h::Timer3AttachFunction" ref="a822862a191b02c8975cd06041241df34" args="(void(*Process)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Timer3AttachFunction </td>
          <td>(</td>
          <td class="paramtype">void(*)(void)&nbsp;</td>
          <td class="paramname"> <em>Process</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Attach a function to the Timer3. </p>
<p>The Timer3 Interrupt will trigger the function in parameter.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>Process</em>&nbsp;</td><td>User function</td></tr>
  </table>
  </dd>
</dl>
<dl class="user"><dt><b>Attach function example</b></dt><dd></dd></dl>
<div class="fragment"><pre class="fragment">  <span class="comment">// This code call the MyProcess function at overflow of timer3.</span>
  <span class="keywordtype">void</span> MyProcess(<span class="keywordtype">void</span>)
  {
                <span class="comment">//all the 7.5 ms, this function is triggered by the Timer3 Interrupt.</span>
  }

  <span class="keywordtype">void</span> main(<span class="keywordtype">void</span>)
  {
        <a class="code" href="pob_robotic_suite_8h.html#a9c7b6f7049447d5d9103ab928bdb4dd2" title="Initialize the microcontroller of the POB-Robotics-Suite.">InitCpu</a>();
        <a class="code" href="_sensor_8h.html#a43a000f01e2871fa6ce80b03d7fbb0bf" title="Initialize the hardware of the POB-Robotics-Suite.">InitRobot</a>();

                <span class="comment">// Init timer:</span>
                Timer3Init(7500);

                <span class="comment">// Attach a function to timer3</span>
                <a class="code" href="timer_8h.html#a822862a191b02c8975cd06041241df34" title="Attach a function to the Timer3.">Timer3AttachFunction</a>(&amp;MyProcess);

                <span class="keywordflow">while</span>(1)
                {
                        <span class="comment">// Main loop</span>
                }

  }
</pre></div> 
</div>
</div>
<a class="anchor" id="aa459f9586e58789d008b72071dcca310"></a><!-- doxytag: member="timer.h::Timer3DetachFunction" ref="aa459f9586e58789d008b72071dcca310" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Timer3DetachFunction </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Remove the function attached to the Timer3. </p>

</div>
</div>
<a class="anchor" id="a66d803bbb86607dd36a6838bc89e77db"></a><!-- doxytag: member="timer.h::WaitMs" ref="a66d803bbb86607dd36a6838bc89e77db" args="(UInt32 delayInMs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WaitMs </td>
          <td>(</td>
          <td class="paramtype">UInt32&nbsp;</td>
          <td class="paramname"> <em>delayInMs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait a delay in milliseconds. </p>
<p>This function use the Timer1 hardware and it's very accurate.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>delayInMs</em>&nbsp;</td><td>Delay in milliseconds to wait. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5269998c8dd050fbd8ff1c958f9a59cd"></a><!-- doxytag: member="timer.h::WaitUs" ref="a5269998c8dd050fbd8ff1c958f9a59cd" args="(UInt32 delayInUs)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void WaitUs </td>
          <td>(</td>
          <td class="paramtype">UInt32&nbsp;</td>
          <td class="paramname"> <em>delayInUs</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Wait a delay in microseconds. </p>
<p>This function use the Timer1 hardware and it's very accurate.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>delayInUs</em>&nbsp;</td><td>Delay in microseconds to wait. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
<!-- 
	Author : Baptiste Burles. POB-Technology
	Date : 10/10/2005
	
	This is the html footer for the Doxygen doc.
	
-->
<html>

<p>

<center>
	<hr size="1"><address style="align: right;"><small>Generated by&nbsp;
	<a href="http://www.doxygen.org/index.html">
	<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> </small></address>
	
	
	<address style="align: right;"><small>
	This is a documentation from 
	<a href="http://www.pob-technology.com">
	<img src="LOGO_POB.JPG" align="middle" border="0"></a> All rights reserved.
	</small></address>
	
</center>

</html>
